{% extends "base.html" %}
{% load filters %}

{% block nav %}
{% endblock %}

{% block content %}
    <div class="content huge-content">
        <h1 class="page-title">Transactions</h1>
        <div class="table">
            <table>
                <thead>
                    <th>Date</th>
                    <th>Vendor</th>
                    <th>Reason</th>
                    <th>Method</th>
                    <th>Category</th>
                    <th>Amount</th>
                </thead>
                <tr>
                    <td><input type="date" name="date" id="listTransactionsFilterDate"></td>
                    <td><input type="text" name="vendor" id="listTransactionsFilterVendor"></td>
                    <td><input type="text" name="reason" id="listTransactionsFilterReason"></td>
                    <td>
                        <select name="method" id="listTransactionsFilterMethod">
                            {% for method in methods %}
                                <option value="{{ method.id }}" label="{{ method.name }}"></option>
                            {% endfor %}
                        </select>
                    </td>
                    <td>
                        <select name="category" id="listTransactionsFilterCategory">
                            {% for category in categories %}
                                <option value="{{ category.id }}" label="{{ category.name }}"></option>
                            {% endfor %}
                        </select>
                    </td>
                    <td></td>
                </te>
                {% for transaction in transactions %}
                    <tr class="clickable" onclick="window.location = '/transactions/{{transaction.id}}?prevUrl=transactions'">
                        <td>{{ transaction.dateStr }}</td>
                        <td>{{ transaction.vendor }}</td>
                        <td>{{ transaction.reason }}</td>
                        <td>{{ transaction.method }}</td>
                        <td>{{ transaction.category }}</td>
                        <td class="accounting">{{ transaction.amountStr|spacify }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <p>Showing {{ transactions.count }} transactions</p>
        {% if not hideShowMore %}
            <form method="post" action="{% url 'transactions' %}">
                {% csrf_token %}
                <input hidden name="prevNumToShow" type="number" value="{{ prevNumToShow }}">
                <button type="submit" class="btn btn-primary">Show More<i class="bi bi-plus-lg icon-right"></i></button>
            </form>
        {% endif %}
    </div>
{% endblock %}